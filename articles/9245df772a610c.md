---
title: "MagicOnion Server ã‚’ GCP ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹"
emoji: "ğŸ•Œ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: []
published: false
---

# æ¦‚è¦
MagicOnion ã‚’ GCP ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™

ãƒ‡ãƒ—ãƒ­ã‚¤ã¯ GCP Deployment Manager ã‚’ä½¿ã„ã¾ã™ã€‚

[gcloud CLI ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ Â |Â  Google Cloud CLI ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://cloud.google.com/sdk/docs/install?hl=ja)

[gcloud CLI ã®åˆæœŸåŒ– Â |Â  Google Cloud CLI ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://cloud.google.com/sdk/docs/initializing?hl=ja#whats_next)


[GCPã‚’ä½¿ã£ã¦HTTPSã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’å…¬é–‹ã™ã‚‹ï¼ˆå‰ç·¨ï¼‰](https://zenn.dev/knockknock/articles/10aa24fde47c45)


# Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®push
## gcloud sdk ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
[gcloud CLI ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ Â |Â  Google Cloud CLI ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://cloud.google.com/sdk/docs/install?hl=ja#supported_python_versions)

## Docker Hub ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã®ä½œæˆ

[ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ: Docker Hub ãƒªãƒ¢ãƒ¼ãƒˆ ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã™ã‚‹ Â |Â  Artifact Registry ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ Â |Â  Google Cloud](https://cloud.google.com/artifact-registry/docs/repositories/create-dockerhub-remote-repository?hl=ja)

### Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰&ãƒ—ãƒƒã‚·ãƒ¥
docker build -t asia-northeast1-docker.pkg.dev/fuuro-409604/onisync/onisync:0.01 -f OniSync.Server/Dockerfile .

docker push asia-northeast1-docker.pkg.dev/fuuro-409604/onisync/onisync:0.01

![Alt text](image.png)

![Alt text](image-1.png)

```
gcloud compute instances create-with-container instance-test --project=fuuro-409604 --zone=us-central1-a --machine-type=n1-standard-1 --service-account=840485945008-compute@developer.gserviceaccount.com --container-image=asia-northeast1-docker.pkg.dev/fuuro-409604/onisync/onisync:0.01

```


# ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‹ã‚‰ãƒ‡ãƒ—ãƒ­ã‚¤

gcloud deployment-manager deployments create onisync-deploy --config instance-template.yaml